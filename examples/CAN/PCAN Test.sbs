using TSharp.PCAN;
using Devices.CAN;

namespace CANSnifferDemo;

procedure ICANChannel OpenCAN()
{
	var adapter = PCANInterface.Instance.GetAdapter("USBBUS1");
	var channel = adapter.GetChannel(0);
	channel.Setup(CANBaudrate.BR500K, CANChannelMode.Extended, 1s);
	if (!channel.IsOpen)
	{
		channel.Open();
	}
	return channel;
}

procedure void CANTest()
{
	log ("Entered CANTest");

	ICANChannel channel = null;
	channel = OpenCAN();

	log ("End of CANTest ");
}